@startuml

title A known device login on a Caliopen instance

== Authentication ==
Device -> API: POST /authentications (username, password, device_id, sign(device_id))
API -> Backend: check_credentials
Backend -> API: access token
API -> Backend: check_device_signature(device_id, sign(device_id))
Backend -> API: ok
API -> Device: 200

== Call API ==
Device -> Device: sign(access token)
Device -> API: GET /discussions with headers Access-Token, X-Device-ID X-Device-Signature
API -> Backend: check token and device signature (token, device_id, device signature)
Backend -> API: ok
API -> Device: 200 [discussions]

@enduml
